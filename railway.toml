[build]
builder = "nixpacks"
# Using pnpm@8.15.4 as specified in root package.json
buildCommand = "pnpm install && pnpm -F @uniconnect/shared migrate && pnpm -F app build"

[services.app]
# UniConnect Main SvelteKit Application
startCommand = "node apps/app/build/index.js"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
healthcheckInterval = 30

[services.worker]
# Background Job Worker
startCommand = "node apps/worker/dist/index.js"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
healthcheckInterval = 30
