[build]
builder = "nixpacks"

[services.app]
# UniConnect Main SvelteKit Application
startCommand = "npm run start"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
healthcheckInterval = 30

[services.extractor]
# High-Fidelity Layout Analysis Engine (Python/OpenCV)
startCommand = "gunicorn -w 2 -k gthread -b 0.0.0.0:$PORT template_extractor:app"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
healthcheckInterval = 30

[services.worker]
# Background Job Worker for Emails/Campaigns
startCommand = "npm run worker"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
healthcheckInterval = 30
