# Railway configuration for monorepo starting from ROOT
# This ensures workspace dependencies are correctly built.

[[services]]
name = "app"
source = "."
build.command = "pnpm install && pnpm build --filter app"
start.command = "node apps/app/build/index.js"

[[services]]
name = "worker"
source = "."
build.command = "pnpm install && pnpm build --filter worker"
start.command = "node apps/worker/dist/index.js"

[[services]]
name = "extractor"
source = "."
start.command = "python template_extractor.py"

[[services]]
name = "redis"
image = "redis:7-alpine"
